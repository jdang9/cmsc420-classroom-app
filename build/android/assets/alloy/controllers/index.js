function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(){var e;return e=Ti.UI.ActivityIndicatorStyle.DARK,Ti.UI.createActivityIndicator({color:"#ffffff",style:e,height:Ti.UI.SIZE,width:Ti.UI.SIZE})}function t(){Ti.API.info("FORGOT CLICK"),a(),h.loginView.animate({opacity:0,duration:250},function(){h.passworReminderView.visible=!0,h.passworReminderView.animate({opacity:1,duration:250}),h.loginContainer.height="100%"})}function i(){Ti.API.info("CREATE ACCOUNT CLICK");var e=Alloy.createController("signup").getView();e.open()}function r(){h.emailTxt.value?(v||(v=e()),h.emailBtn.add(v),h.emailBtn.title="",m="emailBtn",v.show(),y.remindCallback&&y.remindCallback()):alert("Please provide your email.")}function n(){h.passworReminderView.animate({opacity:0,duration:250},function(){h.passworReminderView.visible=!1,h.loginView.animate({opacity:1,duration:250}),h.loginContainer.height="100%"}),o()}function o(){h.emailTxt.value=""}function a(){h.text_username.value="",h.text_password.value=""}function s(){}function l(){}function c(){h.passwordTxt.focus()}function u(e){h.loginContainer.animate(Ti.App.keyboardVisible?{center:{x:Ti.Platform.displayCaps.platformWidth/2,y:(Ti.Platform.displayCaps.platformHeight-e.keyboardFrame.height)/2},duration:250}:{center:{x:Ti.Platform.displayCaps.platformWidth/2,y:Ti.Platform.displayCaps.platformHeight/2},duration:250})}function d(){g.Users.login({login:h.text_username.value,password:h.text_password.value},function(e){if(e.success){currentUser=e.users[0],Ti.App.Properties.setString("sessionid",e.meta.session_id),h.text_username.hide(),h.text_password.hide();var t=Alloy.createController("main").getView();t.open()}else Ti.API.info("Error:\n"+(e.error&&e.message||JSON.stringify(e)))})}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="index",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var h=this,p={},f={};h.__views.index=Ti.UI.createWindow({layout:"vertical",id:"index"}),h.__views.index&&h.addTopLevelView(h.__views.index),h.__views.loginContainer=Ti.UI.createView({backgroundColor:"#141925",width:Ti.UI.FILL,height:Ti.UI.FILL,layout:"vertical",id:"loginContainer"}),h.__views.index.add(h.__views.loginContainer),h.__views.header=Ti.UI.createImageView({height:300,width:Ti.UI.SIZE,top:20,image:"/images/header_logo.png",id:"header"}),h.__views.loginContainer.add(h.__views.header),h.__views.bodyContainer=Ti.UI.createView({top:0,height:Ti.UI.FILL,id:"bodyContainer"}),h.__views.loginContainer.add(h.__views.bodyContainer),h.__views.loginView=Ti.UI.createView({top:0,height:Ti.UI.FILL,width:Ti.UI.FILL,layout:"vertical",opacity:0,id:"loginView"}),h.__views.bodyContainer.add(h.__views.loginView),h.__views.__alloyId2=Ti.UI.createLabel({color:"#fff",height:30,top:10,left:20,width:Ti.UI.SIZE,text:"Email",id:"__alloyId2"}),h.__views.loginView.add(h.__views.__alloyId2),h.__views.text_username=Ti.UI.createTextField({color:"#fff",height:50,left:20,right:20,backgroundColor:"#2D3442",paddingLeft:15,autocapitalize:!1,autocorrect:!1,borderWidth:0,top:4,returnKeyType:Ti.UI.RETURNKEY_NEXT,id:"text_username"}),h.__views.loginView.add(h.__views.text_username),c?h.__views.text_username.addEventListener("return",c):f["$.__views.text_username!return!focusPassword"]=!0,s?h.__views.text_username.addEventListener("focus",s):f["$.__views.text_username!focus!focusStyle"]=!0,l?h.__views.text_username.addEventListener("blur",l):f["$.__views.text_username!blur!blurStyle"]=!0,h.__views.__alloyId3=Ti.UI.createLabel({color:"#fff",height:30,top:10,left:20,width:Ti.UI.SIZE,text:"Password",id:"__alloyId3"}),h.__views.loginView.add(h.__views.__alloyId3),h.__views.text_password=Ti.UI.createTextField({color:"#fff",height:50,left:20,right:20,backgroundColor:"#2D3442",paddingLeft:15,autocapitalize:!1,autocorrect:!1,borderWidth:0,top:4,passwordMask:!0,id:"text_password"}),h.__views.loginView.add(h.__views.text_password),s?h.__views.text_password.addEventListener("focus",s):f["$.__views.text_password!focus!focusStyle"]=!0,l?h.__views.text_password.addEventListener("blur",l):f["$.__views.text_password!blur!blurStyle"]=!0,h.__views.__alloyId4=Ti.UI.createView({top:17,left:20,right:20,height:Ti.UI.SIZE,id:"__alloyId4"}),h.__views.loginView.add(h.__views.__alloyId4),h.__views.helpImg=Ti.UI.createImageView({height:25,width:25,top:10,left:0,image:"images/help-btn.png",id:"helpImg"}),h.__views.__alloyId4.add(h.__views.helpImg),t?h.__views.helpImg.addEventListener("click",t):f["$.__views.helpImg!click!forgotClick"]=!0,h.__views.forgotLbl=Ti.UI.createLabel({height:25,color:"#999",font:{fontSize:12},shadowOffset:1,shadowColor:"#363636",top:10,left:26,text:"Forgot Password",id:"forgotLbl"}),h.__views.__alloyId4.add(h.__views.forgotLbl),t?h.__views.forgotLbl.addEventListener("click",t):f["$.__views.forgotLbl!click!forgotClick"]=!0,h.__views.loginBtn=Ti.UI.createView({height:44,top:0,backgroundColor:"#5A86AF",borderRadius:5,width:100,right:3,id:"loginBtn"}),h.__views.__alloyId4.add(h.__views.loginBtn),d?h.__views.loginBtn.addEventListener("click",d):f["$.__views.loginBtn!click!loginClick"]=!0,h.__views.loginLbl=Ti.UI.createLabel({color:"#fff",font:{fontSize:14},textAlign:"center",height:Ti.UI.SIZE,width:Ti.UI.SIZE,text:"Login",id:"loginLbl"}),h.__views.loginBtn.add(h.__views.loginLbl),h.__views.__alloyId5=Ti.UI.createView({top:17,left:20,right:20,height:Ti.UI.SIZE,id:"__alloyId5"}),h.__views.loginView.add(h.__views.__alloyId5),h.__views.accountBtn=Ti.UI.createButton({height:44,top:0,backgroundColor:"#5A86AF",borderRadius:5,title:"Create Account",id:"accountBtn"}),h.__views.__alloyId5.add(h.__views.accountBtn),i?h.__views.accountBtn.addEventListener("click",i):f["$.__views.accountBtn!click!createAccountClick"]=!0,h.__views.passworReminderView=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL,layout:"vertical",opacity:0,visible:!1,top:0,id:"passworReminderView"}),h.__views.bodyContainer.add(h.__views.passworReminderView),h.__views.__alloyId6=Ti.UI.createLabel({color:"#fff",height:30,top:10,left:20,width:Ti.UI.SIZE,text:"Email",id:"__alloyId6"}),h.__views.passworReminderView.add(h.__views.__alloyId6),h.__views.emailTxt=Ti.UI.createTextField({color:"#fff",height:50,left:20,right:20,backgroundColor:"#2D3442",paddingLeft:15,autocapitalize:!1,autocorrect:!1,borderWidth:0,top:4,id:"emailTxt"}),h.__views.passworReminderView.add(h.__views.emailTxt),s?h.__views.emailTxt.addEventListener("focus",s):f["$.__views.emailTxt!focus!focusStyle"]=!0,l?h.__views.emailTxt.addEventListener("blur",l):f["$.__views.emailTxt!blur!blurStyle"]=!0,h.__views.__alloyId7=Ti.UI.createView({top:17,left:20,right:20,height:Ti.UI.SIZE,id:"__alloyId7"}),h.__views.passworReminderView.add(h.__views.__alloyId7),h.__views.emailBtn=Ti.UI.createView({height:44,top:0,backgroundColor:"#5A86AF",borderRadius:5,width:130,right:3,color:"#fff",id:"emailBtn"}),h.__views.__alloyId7.add(h.__views.emailBtn),r?h.__views.emailBtn.addEventListener("click",r):f["$.__views.emailBtn!click!remindClick"]=!0,h.__views.resetLbl=Ti.UI.createLabel({color:"#fff",font:{fontSize:14},textAlign:"center",height:Ti.UI.SIZE,width:Ti.UI.SIZE,text:"Reset",id:"resetLbl"}),h.__views.emailBtn.add(h.__views.resetLbl),h.__views.cancelBtn=Ti.UI.createView({height:44,top:0,backgroundColor:"#6a6a6a",borderRadius:5,left:3,width:130,color:"#fff",id:"cancelBtn"}),h.__views.__alloyId7.add(h.__views.cancelBtn),n?h.__views.cancelBtn.addEventListener("click",n):f["$.__views.cancelBtn!click!cancelClick"]=!0,h.__views.cancelLbl=Ti.UI.createLabel({color:"#fff",font:{fontSize:14},textAlign:"center",height:Ti.UI.SIZE,width:Ti.UI.SIZE,text:"Cancel",id:"cancelLbl"}),h.__views.cancelBtn.add(h.__views.cancelLbl),p.destroy=function(){},_.extend(h,h.__views);var g=require("ti.cloud");arguments[0]||{};var v,m,y={};h.loginClick=function(){d()},h.hideActivityIndicator=function(){null!=v&&h[m].remove(v)},Ti.App.addEventListener("keyboardframechanged",u),h.open=function(){h.index.open(),h.loginContainer.height="100%",h.loginView.opacity=1,Ti.API.info(h.loginContainer.height)},h.close=function(){Ti.App.removeEventListener("keyboardframechanged",u),h.destroy(),Alloy.CFG.skipLogin=!1},h.open(),f["$.__views.text_username!return!focusPassword"]&&h.__views.text_username.addEventListener("return",c),f["$.__views.text_username!focus!focusStyle"]&&h.__views.text_username.addEventListener("focus",s),f["$.__views.text_username!blur!blurStyle"]&&h.__views.text_username.addEventListener("blur",l),f["$.__views.text_password!focus!focusStyle"]&&h.__views.text_password.addEventListener("focus",s),f["$.__views.text_password!blur!blurStyle"]&&h.__views.text_password.addEventListener("blur",l),f["$.__views.helpImg!click!forgotClick"]&&h.__views.helpImg.addEventListener("click",t),f["$.__views.forgotLbl!click!forgotClick"]&&h.__views.forgotLbl.addEventListener("click",t),f["$.__views.loginBtn!click!loginClick"]&&h.__views.loginBtn.addEventListener("click",d),f["$.__views.accountBtn!click!createAccountClick"]&&h.__views.accountBtn.addEventListener("click",i),f["$.__views.emailTxt!focus!focusStyle"]&&h.__views.emailTxt.addEventListener("focus",s),f["$.__views.emailTxt!blur!blurStyle"]&&h.__views.emailTxt.addEventListener("blur",l),f["$.__views.emailBtn!click!remindClick"]&&h.__views.emailBtn.addEventListener("click",r),f["$.__views.cancelBtn!click!cancelClick"]&&h.__views.cancelBtn.addEventListener("click",n),_.extend(h,p)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;