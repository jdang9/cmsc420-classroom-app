function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(){var e;m.Users.showMe(function(t){if(t.success){var i=t.users[0];e=i.id}else alert("Error:\n"+(t.error&&t.message||JSON.stringify(t)))}),Titanium.Media.openPhotoGallery({success:function(t){t.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&(g=t.media,alert(g),m.Photos.create({photo:g,name:"profile"+e,user_id:e},function(e){if(e.success){var t=e.photos[0];alert("Success:\nid: "+t.id+"\nfilename: "+t.filename+"\nsize: "+t.size,"updated_at: "+t.updated_at)}else alert("Error:\n"+(e.error&&e.message||JSON.stringify(e))),alert("Code: "+e.code)}))},cancel:function(){},error:function(e){alert("ERROR: "+e)},mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO]})}function t(){var e;m.Users.showMe(function(t){if(t.success){var i=t.users[0];e=i.id}else alert("Error:\n"+(t.error&&t.message||JSON.stringify(t)))}),m.Photos.search({user_id:e},function(e){if(e.success){for(var t=0;t<e.photos.length;t++){var i=e.photos[t];d=i.urls.original}alert(d);var r=l.UI.create("ImageView",{height:"100%",id:"pPicture",image:d,layout:"vertical"});l.profilePicture.add(r)}else{alert("Error:\n"+(e.error&&e.message||JSON.stringify(e))),d="/images/avatar.jpeg";var n=Ti.UI.createImageView({width:"200px",height:"200px",image:d});l.profilePicture.add(n)}})}function i(){var t=l.UI.create("View",{classes:["button"],id:"uploadBtn"}),i=l.UI.create("Label",{text:"Upload Photo",classes:["buttonLabel"],id:"Lbl"});t.add(i),l.uploadPictureButton.add(t),t.addEventListener("click",function(){e()})}function r(e,t,i){var r="https://api.mongolab.com/api/1/databases/"+e+"/collections/"+t+"?apiKey=EGS_uas-aVUXdr5G2lvujnOtuJytdvPE",n=Ti.Network.createHTTPClient({onload:function(){Ti.API.info("Received text: "+JSON.parse(this.responseText)),alert("success 1")},onerror:function(e){Ti.API.debug(e.error),alert(e.error)},timeout:15e3});n.open("POST",r,!1);var o=JSON.stringify(i);n.setRequestHeader("Content-Type","application/json"),n.send(o)}function n(){m.Users.showMe(function(e){if(e.success){var t=e.users[0];h=t.username,p=t.first_name,f=t.last_name,w=t.email,v=t.id,u=p+" lived the life others wish they had.",userData={_id:v,username:h,firstname:p,lastname:f,email:w,userID:v,userBio:u},r("mobileapp","data",userData);var i,n="mobileapp",o="data",a="/"+v+"?",s="https://api.mongolab.com/api/1/databases/"+n+"/collections/"+o+a+"apiKey=EGS_uas-aVUXdr5G2lvujnOtuJytdvPE",c=Ti.Network.createHTTPClient();c.onload=function(){i=JSON.parse(this.responseText),alert(i)},c.open("GET",s),c.send(),l.username.text="Username: "+t.username,l.firstname.text="First Name: "+t.first_name,l.lastname.text="Last Name: "+t.last_name,l.email.text="Email: "+t.email,l.userID.text="User ID: "+t.id}else alert("Error:\n"+(e.error&&e.message||JSON.stringify(e)))})}function o(){n(),t(),i()}function a(){var e=l.UI.create("View",{classes:["button"],id:"btnRight"}),t=l.UI.create("Label",{text:"Edit Bio",classes:["buttonLabel"],id:"Lbl"});e.add(t),l.specificProfile.add(e),e.addEventListener("click",function(){var e=Alloy.createController("bio").getView();e.open()})}function s(){m.Users.showMe(function(e){if(e.success){var t=e.users[0],i=Ti.UI.createTableViewRow({title:t.custom_fields.userBio,textAlign:"left",font:{fontSize:20},textColor:"white"});l.bioText.appendRow(i)}else alert("Error:\n"+(e.error&&e.message||JSON.stringify(e)))})}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="win2",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var l=this,c={};l.__views.win2=Ti.UI.createWindow({backgroundColor:"#141925",color:"#fff",id:"win2"}),l.__views.win2&&l.addTopLevelView(l.__views.win2),l.__views.profileContainer=Ti.UI.createView({top:0,width:Ti.UI.SIZE,height:Ti.UI.SIZE,id:"profileContainer"}),l.__views.win2.add(l.__views.profileContainer),l.__views.profileHorizontal=Ti.UI.createView({top:0,width:Ti.UI.SIZE,height:"50%",layout:"horizontal",id:"profileHorizontal"}),l.__views.profileContainer.add(l.__views.profileHorizontal),l.__views.profileImage=Ti.UI.createView({height:"100%",width:"50%",pd:"10",layout:"vertical",id:"profileImage"}),l.__views.profileHorizontal.add(l.__views.profileImage),l.__views.__alloyId25=Ti.UI.createView({height:"15%",width:Ti.UI.FILL,id:"__alloyId25"}),l.__views.profileImage.add(l.__views.__alloyId25),l.__views.__alloyId26=Ti.UI.createLabel({color:"#fff",height:25,font:{fontSize:16},shadowOffset:1,shadowColor:"#363636",width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Profile Image",id:"__alloyId26"}),l.__views.__alloyId25.add(l.__views.__alloyId26),l.__views.profilePicture=Ti.UI.createView({height:"65%",width:"100%",layout:"vertical",id:"profilePicture"}),l.__views.profileImage.add(l.__views.profilePicture),l.__views.uploadPictureButton=Ti.UI.createView({height:"20%",width:"100%",layout:"vertical",id:"uploadPictureButton"}),l.__views.profileImage.add(l.__views.uploadPictureButton),l.__views.profileBasic=Ti.UI.createView({height:"100%",width:"50%",pd:"10",layout:"vertical",id:"profileBasic"}),l.__views.profileHorizontal.add(l.__views.profileBasic),l.__views.__alloyId27=Ti.UI.createView({height:"15%",width:Ti.UI.FILL,id:"__alloyId27"}),l.__views.profileBasic.add(l.__views.__alloyId27),l.__views.__alloyId28=Ti.UI.createLabel({color:"#fff",height:25,font:{fontSize:16},shadowOffset:1,shadowColor:"#363636",width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Basic Info",id:"__alloyId28"}),l.__views.__alloyId27.add(l.__views.__alloyId28),l.__views.username=Ti.UI.createLabel({color:"#fff",font:{fontSize:12},height:30,top:2,left:20,width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,id:"username"}),l.__views.profileBasic.add(l.__views.username),l.__views.firstname=Ti.UI.createLabel({color:"#fff",font:{fontSize:12},height:30,top:2,left:20,width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,id:"firstname"}),l.__views.profileBasic.add(l.__views.firstname),l.__views.lastname=Ti.UI.createLabel({color:"#fff",font:{fontSize:12},height:30,top:2,left:20,width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,id:"lastname"}),l.__views.profileBasic.add(l.__views.lastname),l.__views.email=Ti.UI.createLabel({color:"#fff",font:{fontSize:12},height:30,top:2,left:20,width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,id:"email"}),l.__views.profileBasic.add(l.__views.email),l.__views.userID=Ti.UI.createLabel({color:"#fff",font:{fontSize:12},height:30,top:2,left:20,width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,id:"userID"}),l.__views.profileBasic.add(l.__views.userID),l.__views.profileVertical=Ti.UI.createView({top:"50%",width:Ti.UI.SIZE,height:"50%",layout:"vertical",id:"profileVertical"}),l.__views.profileContainer.add(l.__views.profileVertical),l.__views.profileSpecific=Ti.UI.createView({height:"50%",width:"100%",pd:"10",layout:"vertical",id:"profileSpecific"}),l.__views.profileVertical.add(l.__views.profileSpecific),l.__views.__alloyId29=Ti.UI.createView({height:"15%",width:Ti.UI.FILL,id:"__alloyId29"}),l.__views.profileSpecific.add(l.__views.__alloyId29),l.__views.__alloyId30=Ti.UI.createLabel({color:"#fff",height:25,font:{fontSize:16},shadowOffset:1,shadowColor:"#363636",width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Profile Specific Info",id:"__alloyId30"}),l.__views.__alloyId29.add(l.__views.__alloyId30),l.__views.specificProfile=Ti.UI.createView({height:"85%",width:Ti.UI.FILL,id:"specificProfile"}),l.__views.profileSpecific.add(l.__views.specificProfile),l.__views.bioText=Ti.UI.createTableView({text:"white",height:Ti.UI.SIZE,width:"80%",id:"bioText"}),l.__views.specificProfile.add(l.__views.bioText),l.__views.profileClasses=Ti.UI.createView({height:"50%",width:"100%",pd:"10",layout:"vertical",id:"profileClasses"}),l.__views.profileVertical.add(l.__views.profileClasses),l.__views.__alloyId31=Ti.UI.createView({height:"15%",width:Ti.UI.FILL,id:"__alloyId31"}),l.__views.profileClasses.add(l.__views.__alloyId31),l.__views.__alloyId32=Ti.UI.createLabel({color:"#fff",height:25,font:{fontSize:16},shadowOffset:1,shadowColor:"#363636",width:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Classes",id:"__alloyId32"}),l.__views.__alloyId31.add(l.__views.__alloyId32),c.destroy=function(){},_.extend(l,l.__views),Alloy.Globals.response="";var u,d,h,p,f,w,v,g,m=require("ti.cloud");o(),a(),s(),_.extend(l,c)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;